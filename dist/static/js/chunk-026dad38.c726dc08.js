(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-026dad38"],{b291:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-subheader",{staticClass:"pl-0"},[t._v("A simple demo for showing how to build datatable with REST API ")]),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{tile:""}},[a("v-toolbar",{attrs:{flat:""}},[a("v-text-field",{attrs:{text:"",solo:"",flat:"","prepend-icon":t.showFilter?"mdi-filter-variant-plus":"mdi-filter-variant","append-icon":"mdi-magnify",placeholder:"Type something","hide-details":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleApplyFilter.apply(null,arguments)},"click:append":t.handleApplyFilter,"click:prepend":function(e){t.showFilter=!t.showFilter},"click:clear":t.handleClear},model:{value:t.filter["filter[name]"],callback:function(e){t.$set(t.filter,"filter[name]",e)},expression:"filter['filter[name]']"}}),a("v-btn",{attrs:{icon:""},on:{click:t.handleRefreshItem}},[a("v-icon",[t._v("mdi-refresh")])],1),a("v-btn",{attrs:{icon:""},on:{click:t.handleCreateItem}},[a("v-icon",[t._v("mdi-plus")])],1)],1),a("v-divider"),a("v-card",{directives:[{name:"show",rawName:"v-show",value:t.showFilter,expression:"showFilter"}],staticClass:"grey lighten-4",attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:4}},[a("v-autocomplete",{attrs:{items:t.getProjectList,label:"Project"},model:{value:t.filter["filter[project_id]"],callback:function(e){t.$set(t.filter,"filter[project_id]",e)},expression:"filter['filter[project_id]']"}})],1),a("v-col",{attrs:{cols:4}},[a("v-autocomplete",{attrs:{items:t.getTaskStatus,label:"Status"},model:{value:t.filter["filter[status]"],callback:function(e){t.$set(t.filter,"filter[status]",e)},expression:"filter['filter[status]']"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.handleResetFilter}},[t._v("Reset")]),a("v-btn",{attrs:{tile:"",color:"primary"},on:{click:t.handleApplyFilter}},[t._v("Apply")])],1)],1),a("v-card-text",{staticClass:"pa-0"},[a("v-data-table",{attrs:{loading:t.loadingItems,headers:t.headers,items:t.items,"items-per-page-options":[15,30,50],"server-items-length":t.serverItemsLength,"items-per-page":t.itemsPerPage,page:t.filter["page"],"item-key":"id","show-select":""},on:{"update:page":[function(e){return t.$set(t.filter,"page",e)},t.handlePageChanged]},scopedSlots:t._u([{key:"item.status",fn:function(e){var i=e.item;return[a("v-autocomplete",{attrs:{items:t.getTaskStatus},on:{change:function(e){return t.handleUpdateStatus(i,i.status)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"item.status"}})]}},{key:"item.action",fn:function(e){var i=e.item;return[a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},t.onTooltip(Object.assign({},s,i))),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[a("span",[t._v("Action")])])]}}],null,!0)},[a("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(t.actions,(function(e){return a("v-list-item",{key:e.text,on:{click:function(t){return e.click(i)}}},[a("v-list-item-icon",{staticClass:"mr-2"},[a("v-icon",{attrs:{small:""}},[t._v(t._s(e.icon))])],1),a("v-list-item-title",[t._v(t._s(e.text))])],1)})),1)],1)]}}],null,!0)})],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",width:"840"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("task-form",{attrs:{item:t.selectedItem},on:{"form:success":t.handleFormSuccess}})],1)],1)},s=[],r=a("5530"),l=(a("4de4"),a("caad"),a("e25e"),a("6eba"),a("0d03"),a("ac1f"),a("5319"),a("aa7e")),n=a("5ee3"),o=a("2f62"),c={components:{TaskForm:n["a"]},mixins:[l["a"]],data:function(){return{showDialog:!1,search:"",loadingItems:!1,selectedItem:null,serverItemsLength:0,itemsPerPage:15,showFilter:!0,filter:{page:1,"filter[name]":null,"filter[project_id]":null,"filter[status]":null},headers:[{text:"Project",value:"project.name"},{text:"Task",value:"name"},{text:"Description",value:"description"},{text:"slug",value:"slug"},{text:"Status",value:"status",width:100},{text:"Action",value:"action"}],items:[],actions:[{text:"Edit Item",icon:"mdi-pencil",click:this.handleEditItem},{text:"Delete Item",icon:"mdi-close",click:this.handleDeleteItem}]}},computed:Object(r["a"])({},Object(o["b"])(["getTaskStatus","getProjectList"])),watch:{"$route.query":{handler:function(t){var e=this.updateFilterQuery(t);this.fetchRecords(e)},immediate:!0}},methods:{updateFilterQuery:function(t){var e=Object.assign(this.filter,this.transformQuery(t));return e},transformQuery:function(t){var e=["filter[project_id]","filter[status]","page"];for(var a in t)if(e.includes(a)){var i=t[a]?parseInt(t[a]):t[a];t[a]=i}return t},resetFilter:function(){this.filter={page:1,"filter[name]":null,"filter[project_id]":null,"filter[status]":null}},fetchRecords:function(t){var e=this;return this.loadingItems=!0,this.items=[],this.$store.dispatch("fetchTask",t).then((function(t){var a=t.data,i=t.meta;e.items=a,e.serverItemsLength=i.total,e.loadingItems=!1}))["catch"]((function(){e.loadingItems=!1}))},handleCreateItem:function(){this.selectedItem=null,this.showDialog=!0},handleEditItem:function(t){this.selectedItem=t,this.showDialog=!0},handleDeleteItem:function(t){var e=this,a=t.id;window.confirm("Are you sure to delete this")&&this.$store.dispatch("deleteTask",a).then((function(){e.items=e.items.filter((function(t){return t.id!=a}))}))},handleUpdateStatus:function(t,e){var a={id:t.id,data:{status:e}};this.$store.dispatch("updateTask",a)},handleRefreshItem:function(){this.fetchRecords(this.filter)},handlePageChanged:function(t){this.filter.page=t,this.filter.t=Date.now(),this.$router.replace({path:this.$route.path,query:this.filter})},handleResetFilter:function(){this.filter={page:1,"filter[name]":null,"filter[status]":null},this.$router.replace({path:this.$route.path})},handleApplyFilter:function(){this.filter.t=Date.now(),this.$router.replace({path:this.$route.path,query:this.filter})},handleClear:function(){this.resetFilter(),this.filter.t=Date.now(),this.$router.replace({path:this.$route.path,query:this.filter})},handleFormSuccess:function(){this.showDialog=!1,this.fetchRecords()}}},u=c,d=a("2877"),h=a("6544"),f=a.n(h),p=a("c6a6"),m=a("8336"),v=a("b0af"),g=a("99d9"),k=a("62ad"),w=a("a523"),b=a("8fea"),I=a("169a"),y=a("ce7e"),x=a("132d"),_=a("8860"),V=a("da13"),F=a("34c3"),$=a("5d23"),C=a("e449"),D=a("0fd9"),T=a("2fa4"),j=a("e0c7"),S=a("8654"),A=a("71d9"),P=a("3a2f"),R=Object(d["a"])(u,i,s,!1,null,null,null);e["default"]=R.exports;f()(R,{VAutocomplete:p["a"],VBtn:m["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["b"],VCol:k["a"],VContainer:w["a"],VDataTable:b["a"],VDialog:I["a"],VDivider:y["a"],VIcon:x["a"],VList:_["a"],VListItem:V["a"],VListItemIcon:F["a"],VListItemTitle:$["c"],VMenu:C["a"],VRow:D["a"],VSpacer:T["a"],VSubheader:j["a"],VTextField:S["a"],VToolbar:A["a"],VTooltip:P["a"]})},c20d:function(t,e,a){var i=a("da84"),s=a("58a8").trim,r=a("5899"),l=i.parseInt,n=/^[+-]?0[Xx]/,o=8!==l(r+"08")||22!==l(r+"0x16");t.exports=o?function(t,e){var a=s(String(t));return l(a,e>>>0||(n.test(a)?16:10))}:l},e25e:function(t,e,a){var i=a("23e7"),s=a("c20d");i({global:!0,forced:parseInt!=s},{parseInt:s})}}]);